---
title: "Data Project"
author: "Gabriel Mancho"
date: "`r Sys.Date()`"
output: md_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## General Topic:

For my data project I would like to analyze the U.S Martial Art's Promotion "UFC" from a statistical standpoint.\
As this is a topic which generates vast amounts of data, there are endless possibilities\
for graphs, analyses and perhaps even predictions.\

Other than honoring the top fighters through visualizing their success and capabilities we want to look at the sport as a whole, meaning we visualize it's expansion and most common outcomes.\

## The Data:

The foundation for this project will be provided by [this dataset](https://www.kaggle.com/datasets/aminealibi/ufc-fights-fighters-and-events-dataset/data).\
Not only does it come with an MIT-License, meaning we are free to do with it as we please,\
but we also get the option to work with completly raw data, straight from the scraper!\
There are 5 datasets included in this package:

-   **The Events**

```{r echo=FALSE}
library(readr)
knitr::kable(
  read_csv("https://raw.githubusercontent.com/Dr-Eberle-Zentrum/Data-projects-with-R-and-GitHub/refs/heads/main/Projects/46Cent/raw_data_UFC/raw_events.csv",
           show_col_types = F)[1:3,]
)
```

-   **The Fighters**

```{r echo=FALSE}
library(readr)
knitr::kable(
  read_csv("https://raw.githubusercontent.com/Dr-Eberle-Zentrum/Data-projects-with-R-and-GitHub/refs/heads/main/Projects/46Cent/raw_data_UFC/raw_fighters.csv",
           show_col_types = F)[1:3,]
)
```

-   **The fights**

```{r echo=FALSE}
library(readr)
knitr::kable(
  read_csv("https://raw.githubusercontent.com/Dr-Eberle-Zentrum/Data-projects-with-R-and-GitHub/refs/heads/main/Projects/46Cent/raw_data_UFC/raw_fights.csv",
           show_col_types = F)[1:3,]
)
```

-   **Details on the fights**

```{r echo=FALSE}
library(readr)
knitr::kable(
  read_csv("https://raw.githubusercontent.com/Dr-Eberle-Zentrum/Data-projects-with-R-and-GitHub/refs/heads/main/Projects/46Cent/raw_data_UFC/raw_details.csv",
           show_col_types = F)[1:3,]
)
```

-   Even more details on the fights\

## Manipulation Goals:

For our first visualization we'll need to add the `W/L-Ratio` to each fighter in the respective dataframe and then aggregate them by weightclass. (Information on the weightclasses can be found [here](https://www.ufc.com/news/understanding-ufc-weight-classes-and-weigh-ins). Then the `weightclass_mean` needs to be calculated.\

The `height_to_reach_ratio` needs to be calculated for each fighter in order to create the second visualization. Also note that the data is very dirty and you'll have to handle a lot of NA's. In this case it's probably best to just remove them.

For the third visualization the Country / State needs to be extracted from the "events" data frame and mutated in such a way that they can be grouped and implemented into the ggplot.

Something similar needs to happen to `method` in the "fights" dataframe in order to create the fourth visualization.

For the fifth graph the `Date` column in "events" will have to be formatted so that it can be used for ggplot and the number of entries for each year need to be counted.\

(OPTIONAL): For the last visualization you'll have to merge some dataframes. You can merge "fights" and "fights_detailed" via `Fight_Id`. After that you'll have to extract the names of the fighters and their total strikes (`Total Str._2` or `Total Str._1`) from the dataframe and merge it onto the "fighters"-frame via their names. However, since the value in the cell will be something like "86 of 165", you'll have to extract the last number (because these are the total punches thrown by the fighter), turn them into numerics and then sum them up before you can add them.

## Visualization Goals

**W/L-Ratio for the Top 10:**

-   Create a barchart in which you visualize the Win/Lose-Ratio of the Top 10 fighters, compared to the means of their weight division. Meaning you will have 20 bars in the chart in total, 2 for each weight division: One for the best fighter in the country and one next to it with the mean W/L-Ratio of that weightclass. Choose a color for each bar-pair and put the Fighter / weightclass name on the x-Axis. Add a legend if you want.

**Do long arms really help you win fights ?:**

-   Create a scatterplot in which you put the height-to-reach ratio of a fighter on the x-Axis and his W/L-Ration on the y-Axis. Add a line which indicates a general trend. Color and name extreme outliers (if there are any)

**Events by location:**

-   Use the "maps" package in combination with ggplot to create a nice chart that shows which countries most UFC-Events have taken place in by coloring the respective country. Afterwards do the same for just the United States, meaning group by state. Don't forget to add a legend that tells you which color symbolizes what number.

**How do fights usually end ?:**

-   Create a horizontal bar chart which shows how many fights ended in a certain way, meaning either\
    KO / TKO, Submission, Doctor Stoppage, Decision, Draw or Disqualification. (Note: the respective variable name is `method`)

**Expansion of the sport:**

-   Create a simple linechart which shows the number of events on the y-Axis and the year on the x-Axis to visualize the growth of the UFC and MMA as a sport!

**How much do these guys punch ?** (optional)**:**

-   While the visualization is rather easy, the underlying manipulation is pretty advanced: We want to visualize how many punches a fighter actually throws in his career. For this you'll create a bar chart which shows the Top 10 fighters with the most punches thrown. Put the number of punches thrown on the y-Axis and their names on the x-Axis. Each fighter should have his own color.
